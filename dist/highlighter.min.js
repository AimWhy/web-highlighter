/*! highlighter v0.0.3 https://github.com/alienzhou/highlighter */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Highlighter=t():e.Highlighter=t()}(window,function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.none="none",e.head="head",e.tail="tail",e.both="both"}(t.SplitType||(t.SplitType={})),function(e){e.DOM_TYPE_ERROR="[DOM] Receive wrong node type.",e.DOM_SELECTION_EMPTY="[DOM] The selection contains no dom node, may be you except them.",e.RANGE_INVALID="[RANGE] Got invalid dom range, can't convert to a valid highlight range.",e.RANGE_NODE_INVALID="[RANGE] Start or end node isn't a text node, it may occur an error.",e.DB_ID_DUPLICATE_ERROR="[STORE] Unique id conflict.",e.CACHE_SET_ERROR="[CACHE] Cache.data can't be set manually, please use .save().",e.SOURCE_TYPE_ERROR="[SOURCE] Object isn't a highlight source instance.",e.HIGHLIGHT_RANGE_FROZEN="[HIGHLIGHT_RANGE] A highlight range must be frozen before render.",e.HIGHLIGHT_SOURCE_NONE_RENDER="[HIGHLIGHT_SOURCE] This highlight source isn't rendered. May be the exception skips it or the dom structure has changed."}(t.ERROR||(t.ERROR={})),function(e){e.CREATE="selection:create",e.REMOVE="selection:remove",e.MODIFY="selection:modify",e.HOVER="selection:hover",e.HOVER_OUT="selection:hover-out"}(t.EventType||(t.EventType={})),function(e){e.text="text",e.span="span"}(t.SelectedNodeType||(t.SelectedNodeType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(8);t.ID_DIVISION=";",t.LOCAL_STORE_KEY="highlight-mengshou",t.STYLE_TAG_ID="highlight-mengshou-style",t.DATASET_IDENTIFIER="highlight-id",t.DATASET_IDENTIFIER_EXTRA="highlight-id-extra",t.DATASET_SPLIT_TYPE="highlight-split-type",t.CAMEL_DATASET_IDENTIFIER=o.default(t.DATASET_IDENTIFIER),t.CAMEL_DATASET_IDENTIFIER_EXTRA=o.default(t.DATASET_IDENTIFIER_EXTRA),t.CAMEL_DATASET_SPLIT_TYPE=o.default(t.DATASET_SPLIT_TYPE),t.DEFAULT_OPTIONS={$root:window.document,exceptSelectors:null,style:{highlightClassName:"highlight-mengshou-wrap"}};var r=t.DEFAULT_OPTIONS.style;t.STYLE_TAG_TEXT="\n    ."+r.highlightClassName+" {\n        background: #ff9;\n        cursor: pointer;\n    }\n    ."+r.highlightClassName+".active {\n        background: #ffb;\n    }\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=n(0);t.getDomMeta=function(e,t){var n=function(e){for(var t=e.parentNode;t.dataset&&t.dataset[o.CAMEL_DATASET_IDENTIFIER];)t=t.parentNode;return t}(e),r=function(e){for(var t=e.tagName,n=document.getElementsByTagName(t),o=0;o<n.length;o++)if(e===n[o])return o;return-1}(n),i=function(e,t){for(var n=[e],o=null,r=0;o=n.pop();){for(var i=o.childNodes,a=i.length-1;a>=0;a--)n.push(i[a]);if(3===o.nodeType&&o!==t)r+=o.textContent.length;else if(3===o.nodeType)break}return r}(n,e);return{parentTagName:n.tagName,parentIndex:r,textOffset:i+t}},t.queryDomByMeta=function(e){var t=e.parentTagName,n=e.parentIndex,o=e.textOffset;return function(e,t){for(var n=[e],o=null,r=0,i=0;o=n.pop();){for(var a=o.childNodes,s=a.length-1;s>=0;s--)n.push(a[s]);if(3===o.nodeType&&(i=t-r,(r+=o.textContent.length)>=t))break}return{$node:o,offset:i}}(document.getElementsByTagName(t)[n],o)};var i=function(e,t){if(!e)return!1;if(/^\./.test(t)){var n=t.replace(/^\./,"");return e&&e.classList.contains(n)}if(/^#/.test(t)){var o=t.replace(/^#/,"");return e&&e.id===o}var r=t.toUpperCase();return e&&e.tagName===r};t.getSelectedNodes=function(e,t,n,o,a,s){if(void 0===e&&(e=window.document),t===n&&t instanceof Text){for(var u=t;u;){if(1===u.nodeType&&s&&s.some(function(e){return i(u,e)}))return[];u=u.parentNode}t.splitText(o);var l=t.nextSibling;return l.splitText(a-o),[{$node:l,type:r.SelectedNodeType.text,splitType:r.SplitType.both}]}for(var c=[e],f=[],h=!1,d=null;d=c.pop();)if(1!==d.nodeType||!s||!s.some(function(e){return i(d,e)})){for(var p=d.childNodes,E=p.length-1;E>=0;E--)c.push(p[E]);if(d===t){if(3===d.nodeType){d.splitText(o);var _=d.nextSibling;f.push({$node:_,type:r.SelectedNodeType.text,splitType:r.SplitType.head})}h=!0}else{if(d===n){if(3===d.nodeType)(_=d).splitText(a),f.push({$node:_,type:r.SelectedNodeType.text,splitType:r.SplitType.tail});break}h&&3===d.nodeType&&f.push({$node:d,type:r.SelectedNodeType.text,splitType:r.SplitType.none})}}return f},t.isHighlightWrapNode=function(e){return!!e.dataset&&!!e.dataset[o.CAMEL_DATASET_IDENTIFIER]},t.getDomPosition=function(e){for(var t=0,n=0;1!==e.nodeType;)e=e.parentNode;for(;e;)t+=e.offsetTop,n+=e.offsetLeft,e=e.offsetParent;return{top:t,left:n}},t.getAllHighlightDom=function(e){Array.isArray(e)||(e=[e]);for(var t=[],n=0;n<e.length;n++){var r=e[n].querySelectorAll("[data-"+o.DATASET_IDENTIFIER+"]");t.concat(r)}return t},t.getHighlightDomById=function(e,t){for(var n=[],r=new RegExp("("+t+"\\"+o.ID_DIVISION+"|\\"+o.ID_DIVISION+"?"+t+"$)"),i=e.querySelectorAll("[data-"+o.DATASET_IDENTIFIER+"]"),a=0;a<i.length;a++){var s=i[a];if(s.dataset[o.CAMEL_DATASET_IDENTIFIER]!==t){var u=s.dataset[o.CAMEL_DATASET_IDENTIFIER_EXTRA];r.test(u)&&n.push(s)}else n.push(s)}return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r=n(2),i=function(){function e(e,t,n,o){this.startMeta=e,this.endMeta=t,this.text=n,this.id=o}return e.prototype.deSerialize=function(){var e=r.queryDomByMeta(this.startMeta),t=r.queryDomByMeta(this.endMeta);return new o.default(e.$node,t.$node,e.offset,t.offset,this.text,this.id,!0)},e}();t.default=i},function(e,t,n){"use strict";var o=Object.prototype.hasOwnProperty,r="~";function i(){}function a(e,t,n,o,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new function(e,t,n){this.fn=e,this.context=t,this.once=n||!1}(n,o||e,i),s=r?r+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],a]:e._events[s].push(a):(e._events[s]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function u(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),u.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)o.call(e,t)&&n.push(r?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},u.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,i=n.length,a=new Array(i);o<i;o++)a[o]=n[o].fn;return a},u.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},u.prototype.emit=function(e,t,n,o,i,a){var s=r?r+e:e;if(!this._events[s])return!1;var u,l,c=this._events[s],f=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),f){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,o),!0;case 5:return c.fn.call(c.context,t,n,o,i),!0;case 6:return c.fn.call(c.context,t,n,o,i,a),!0}for(l=1,u=new Array(f-1);l<f;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var h,d=c.length;for(l=0;l<d;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),f){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,n);break;case 4:c[l].fn.call(c[l].context,t,n,o);break;default:if(!u)for(h=1,u=new Array(f-1);h<f;h++)u[h-1]=arguments[h];c[l].fn.apply(c[l].context,u)}}return!0},u.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},u.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},u.prototype.removeListener=function(e,t,n,o){var i=r?r+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||o&&!a.once||n&&a.context!==n||s(this,i);else{for(var u=0,l=[],c=a.length;u<c;u++)(a[u].fn!==t||o&&!a[u].once||n&&a[u].context!==n)&&l.push(a[u]);l.length?this._events[i]=1===l.length?l[0]:l:s(this,i)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new i,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,e.exports=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),r=n(9),i=n(0),a=n(2),s=n(10),u=function(){function e(e,t,n,o,a,s,u){void 0===u&&(u=!1),3===e.nodeType&&3===t.nodeType||console.warn(i.ERROR.RANGE_NODE_INVALID),this.start={$node:e,offset:n},this.end={$node:t,offset:o},this.text=a,this.id=s||r.default(),this.frozen=u}return e.removeDomRange=function(){s.removeSelection()},e.fromSelection=function(){var t=s.getDomRange();return t?new e(t.startContainer,t.endContainer,t.startOffset,t.endOffset,t.toString()):null},e.prototype.serialize=function(){var e=a.getDomMeta(this.start.$node,this.start.offset),t=a.getDomMeta(this.end.$node,this.end.offset);return this.frozen=!0,new o.default(e,t,this.text,this.id)},e}();t.default=u},function(e,t,n){e.exports=n(7)},function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),a=n(0),s=n(1),u=n(2),l=n(5),c=n(3),f=n(11),h=n(12),d=n(14),p=function(e){function t(t){var n=e.call(this)||this;return n._highlighFromHRange=function(e){var t=e.serialize();return 0===n.paint.highlightRange(e).length?(console.warn(a.ERROR.DOM_SELECTION_EMPTY),null):(n.cache.save(t),n.emit(a.EventType.CREATE,{sources:[t]}),t)},n._handleSelection=function(e){var t=l.default.fromSelection();t&&(n._highlighFromHRange(t),l.default.removeDomRange())},n._handleHighlightHover=function(e){var t=e.target;if(!u.isHighlightWrapNode(t))return n._hoverId&&n.emit(a.EventType.HOVER_OUT,{id:n._hoverId}),void(n._hoverId=null);var o=t.dataset?t.dataset[s.CAMEL_DATASET_IDENTIFIER]:void 0;n._hoverId!==o&&(n._hoverId&&n.emit(a.EventType.HOVER_OUT,{id:n._hoverId}),n._hoverId=o,n.emit(a.EventType.HOVER,{id:n._hoverId}))},n.run=function(){return n.options.$root.addEventListener("mouseup",n._handleSelection),n},n.stop=function(){return n.options.$root.removeEventListener("mouseup",n._handleSelection),n},n.dispose=function(){return n.options.$root.removeEventListener("mouseover",n._handleHighlightHover),n.options.$root.removeEventListener("mouseup",n._handleSelection),n},n.getDoms=function(e){return e?u.getHighlightDomById(n.options.$root,e):u.getAllHighlightDom(n.options.$root)},n.addClass=function(e,t){return n.getDoms(t).forEach(function(t){return t.classList.add(e)}),n},n.removeClass=function(e,t){return n.getDoms(t).forEach(function(t){return t.classList.remove(e)}),n},n.setOption=function(e){n.options=r({},n.options,e),n.paint=new h.default({$root:n.options.$root,highlightClassName:n.options.style.highlightClassName,exceptSelectors:n.options.exceptSelectors})},n.getHighlightPosition=function(e){var t=n.getDoms(e),o=u.getDomPosition(t[0]),r=u.getDomPosition(t[t.length-1]),i=t[t.length-1].offsetHeight,a=t[t.length-1].offsetWidth;return{start:{top:o.top,left:o.left},end:{top:r.top+i,left:r.left+a}}},n.fromRange=function(e){var t=new l.default(e.startContainer,e.endContainer,e.startOffset,e.endOffset,e.toString());return t?n._highlighFromHRange(t):(console.warn(a.ERROR.RANGE_INVALID),null)},n.options=r({},s.DEFAULT_OPTIONS,t),n.paint=new h.default({$root:n.options.$root,highlightClassName:n.options.style.highlightClassName,exceptSelectors:n.options.exceptSelectors}),n.cache=new f.default,n.options.$root.addEventListener("mouseover",n._handleHighlightHover),n}return o(t,e),t.buildFromJSON=function(e){return function(e){return!!(e.startMeta&&e.endMeta&&e.text&&e.id)}(e)?null:new c.default(e.startMeta,e.endMeta,e.text,e.id)},t.prototype.fromSource=function(e){var t=this;void 0===e&&(e=[]);var n=[];return(Array.isArray(e)?e:[e]).forEach(function(e){e instanceof c.default?t.paint.highlightSource(e).length>0?n.push(e):console.warn(a.ERROR.HIGHLIGHT_SOURCE_NONE_RENDER,e):console.error(a.ERROR.SOURCE_TYPE_ERROR)}),this.emit(a.EventType.CREATE,{sources:n}),this.cache.save(e),this},t.prototype.remove=function(e){if(e)return this.paint.removeHighlight(e),this.cache.remove(e),this.emit(a.EventType.REMOVE,{ids:[e]}),this},t.prototype.removeAll=function(){this.paint.removeAllHighlight();var e=this.cache.removeAll();return this.emit(a.EventType.REMOVE,{ids:e}),this},t.event=a.EventType,t.LocalStore=d.default,t}(i);t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.split("-").reduce(function(e,t,n){return e+(0===n?t:t[0].toUpperCase()+t.slice(1))},"")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDomRange=function(){var e=window.getSelection();return e.isCollapsed?(console.debug("no text selected"),null):e.getRangeAt(0)},t.removeSelection=function(){window.getSelection().removeAllRanges()}},function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),a=n(0),s=function(e){function t(){var t=e.call(this)||this;return t._data=new Map,t}return o(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this.getAll()},set:function(e){throw a.ERROR.CACHE_SET_ERROR},enumerable:!0,configurable:!0}),t.prototype.save=function(e){var t=this;Array.isArray(e)?e.forEach(function(e){return t._data.set(e.id,e)}):this._data.set(e.id,e)},t.prototype.get=function(e){return this._data.get(e)},t.prototype.remove=function(e){this._data.delete(e)},t.prototype.getAll=function(){var e,t,n=[];this._data=new Map;try{for(var o=r(this._data),i=o.next();!i.done;i=o.next()){var a=i.value;n.push(a[1])}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n},t.prototype.removeAll=function(){var e,t,n=[];try{for(var o=r(this._data),i=o.next();!i.done;i=o.next()){var a=i.value;n.push(a[0])}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return this._data=new Map,n},t}(i);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(13),r=n(0),i=n(1),a=function(){function e(e){this.options={$root:e.$root,exceptSelectors:e.exceptSelectors,highlightClassName:e.highlightClassName},this.styleId=i.STYLE_TAG_ID;var t=document.getElementById(this.styleId);if(!t){var n=document.createTextNode(i.STYLE_TAG_TEXT);(t=document.createElement("style")).id=this.styleId,t.appendChild(n),document.head.appendChild(t)}this.$style=t}return e.prototype.highlightRange=function(e){if(!e.frozen)throw r.ERROR.HIGHLIGHT_RANGE_FROZEN;var t=this.options,n=t.$root,i=t.highlightClassName,a=t.exceptSelectors;return o.render(n,e,a,i)},e.prototype.highlightSource=function(e){var t=e.deSerialize();return this.highlightRange(t)},e.prototype.removeAllHighlight=function(){document.querySelectorAll("[data-"+i.DATASET_IDENTIFIER+"]").forEach(function(e){var t=e.parentNode,n=document.createDocumentFragment();e.childNodes.forEach(function(e){return n.appendChild(e.cloneNode(!1))}),t.replaceChild(n,e)})},e.prototype.removeHighlight=function(e){for(var t=new RegExp("("+e+"\\"+i.ID_DIVISION+"|\\"+i.ID_DIVISION+"?"+e+"$)"),n=document.querySelectorAll("span[data-"+i.DATASET_IDENTIFIER+"]"),o=[],r=[],a=[],s=0;s<n.length;s++){var u=n[s].dataset[i.CAMEL_DATASET_IDENTIFIER],l=n[s].dataset[i.CAMEL_DATASET_IDENTIFIER_EXTRA];u!==e||l?u===e?r.push(n[s]):u!==e&&t.test(l)&&a.push(n[s]):o.push(n[s])}o.forEach(function(e){var t=e.parentNode,n=document.createDocumentFragment();e.childNodes.forEach(function(e){return n.appendChild(e.cloneNode(!1))}),t.replaceChild(n,e)}),r.forEach(function(e){var t=e.dataset,n=t[i.CAMEL_DATASET_IDENTIFIER_EXTRA].split(i.ID_DIVISION);t[i.CAMEL_DATASET_IDENTIFIER]=n.shift(),t[i.CAMEL_DATASET_IDENTIFIER_EXTRA]=n.join(i.ID_DIVISION)}),a.forEach(function(e){var n=e.dataset[i.CAMEL_DATASET_IDENTIFIER_EXTRA];e.dataset[i.CAMEL_DATASET_IDENTIFIER_EXTRA]=n.replace(t,"")})},e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n(2),i=n(1),a=function(e,t,n){var a,s=e.$node.parentNode,u=e.$node.previousSibling,l=e.$node.nextSibling;if(r.isHighlightWrapNode(s))if(r.isHighlightWrapNode(s)&&(u||l)){var c=document.createDocumentFragment(),f=s.dataset[i.CAMEL_DATASET_IDENTIFIER],h=s.dataset[i.CAMEL_DATASET_IDENTIFIER_EXTRA];(a=document.createElement("span")).classList.add(n),a.dataset[i.CAMEL_DATASET_IDENTIFIER]=t.id,a.dataset[i.CAMEL_DATASET_IDENTIFIER_EXTRA]=h?h+i.ID_DIVISION+f:f,a.appendChild(e.$node.cloneNode(!1));var d,p=!1,E=!1,_=void 0;if(u)(d=s.cloneNode(!1)).textContent=u.textContent,c.appendChild(d),p=!0;if(c.appendChild(a),l)(d=s.cloneNode(!1)).textContent=l.textContent,c.appendChild(d),E=!0;_=p&&E?o.SplitType.both:p?o.SplitType.head:E?o.SplitType.tail:o.SplitType.none,a.dataset[i.CAMEL_DATASET_SPLIT_TYPE]=_,s.parentNode.replaceChild(c,s)}else{a=s;var v=s.dataset;v[i.CAMEL_DATASET_IDENTIFIER_EXTRA]=v[i.CAMEL_DATASET_IDENTIFIER_EXTRA]?v[i.CAMEL_DATASET_IDENTIFIER_EXTRA]+i.ID_DIVISION+t.id:t.id}else n=n||i.DEFAULT_OPTIONS.style.highlightClassName,(a=document.createElement("span")).classList.add(n),a.dataset[i.CAMEL_DATASET_IDENTIFIER]=t.id,a.dataset[i.CAMEL_DATASET_SPLIT_TYPE]=e.splitType,a.appendChild(e.$node.cloneNode(!1)),e.$node.parentElement.replaceChild(a,e.$node);return a};t.render=function(e,t,n,o){var i=t.start,s=i.$node,u=i.offset,l=t.end,c=l.$node,f=l.offset;return r.getSelectedNodes(e,s,c,u,f,n).map(function(e){return a(e,t,o)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),r=n(15),i=n(16),a=n(1),s=function(){function e(){this.type=r.StoreType.LOCAL,this.key=a.LOCAL_STORE_KEY}return e.prototype.storeToJson=function(){var e,t=localStorage.getItem(this.key);try{e=JSON.parse(t)||[]}catch(t){e=[]}return e},e.prototype.jsonToStore=function(e){localStorage.setItem(this.key,JSON.stringify(e))},e.prototype.save=function(e){var t=this.storeToJson(),n={};return t.forEach(function(e,t){return n[e.hs.id]=t}),Array.isArray(e)||(e=[e]),e.forEach(function(e){void 0!==n[e.hs.id]?t[n[e.hs.id]]=e:t.push(e)}),this.jsonToStore(t),i.resolve(!0)},e.prototype.forceSave=function(e){var t=this.storeToJson();return t.push(e),this.jsonToStore(t),i.resolve(!0)},e.prototype.get=function(e){var t=this.storeToJson().filter(function(t){return t.hs.id===e}).map(function(e){return{hs:new o.default(e.hs.startMeta,e.hs.endMeta,e.hs.text,e.hs.id),info:e.info}});return i.resolve(t[0])},e.prototype.remove=function(e){for(var t=this.storeToJson(),n=null,o=0;o<t.length;o++)if(t[o].hs.id===e){n=o;break}return t.splice(n,1),this.jsonToStore(t),i.resolve(!0)},e.prototype.getAll=function(){return i.resolve(this.storeToJson().map(function(e){return{hs:new o.default(e.hs.startMeta,e.hs.endMeta,e.hs.text,e.hs.id),info:e.info}}))},e.prototype.removeAll=function(){return this.jsonToStore([]),i.resolve(!0)},e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.LOCAL="localStorage",e.INDEX_DB="indexDB"}(t.StoreType||(t.StoreType={}))},function(e,t,n){"use strict";function o(){var e,t;return{promise:new Promise(function(n,o){e=n,t=o}),resolve:e,reject:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o,t.resolve=function(e){var t=o();return t.resolve(e),t.promise},t.reject=function(e){var t=o();return t.reject(e),t.promise}}]).default});
//# sourceMappingURL=highlighter.min.js.map