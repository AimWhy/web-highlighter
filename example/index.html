<!-- htmlcs-disable -->
<!DOCTYPE html>
<html lang="zh-Hans">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <style>
            main {
                max-width: 760px;
                margin: 20px auto;
            }

            img {
                max-width: 100%;
            }
        </style>
        <title>Highlighter: a mini tool for highlighting website text</title>
    </head>
    <body>
        <main>
            <h1 id="web-highlighter">Web Highlighter</h1>
<blockquote>
  <p>a mini text highlighting tool for web</p>
</blockquote>
<p>文本高亮。用于实现非耦合的文本区域高亮功能（例如在文本阅读器、博客文章页面、小说阅读页面）；</p>
<p>同时提供一种可靠的高亮区域的序列化与反序列化方法，用于实现高亮选区的持久化，用以在下次加载页面后还原高亮区域。</p>
<p>一行代码，开启高亮功能：</p>
<pre><code class="JavaScript language-JavaScript">(new Highlighter()).run();</code></pre>
<p>四行代码，实现高亮持久化：</p>
<pre><code class="JavaScript language-JavaScript">// 实例化
var highlighter = new Highlighter();
// 从存储中还原高亮区域
getStore().then(s =&gt; highlighter.fromStore(s.startMeta, s.endMeta, s.id, s.text));
// 存储高亮区域数据
highlighter.on(Highlighter.event.CREATE, ({sources}) =&gt; save(sources));
// 开启自动高亮
highlighter.run();</code></pre>
<h2 id="支持能力">支持能力</h2>
<ul>
<li>文本类内容高亮</li>
<li>文本内容取消高亮</li>
<li>支持高亮选取重合与包含</li>
<li>提供高亮信息持久化，通过数据还原高亮展示（内置可持久化数据格式的生成与还原）</li>
<li>提供多个钩子，实现业务定制化</li>
</ul>
<h2 id="兼容性">兼容性</h2>
<ul>
<li>IE 10、11</li>
<li>Edge</li>
<li>Firefox 52+</li>
<li>Chrome 15+</li>
<li>Safari 5.1+</li>
<li>Opera 15+</li>
</ul>
<h2 id="安装">安装</h2>
<h3 id="npm-安装">npm 安装</h3>
<pre><code class="bash language-bash">npm i web-highlighter</code></pre>
<h3 id="直接从源码构建">直接从源码构建</h3>
<pre><code class="bash language-bash"># git clone
git clone ...

# 使用某一版本
git checkout v1.0.0

npm i
npm run build</code></pre>
<p>然后 <code>dist/web-highlighter.min.js</code> 即为最终产出，产出格式为 UMD 格式。</p>
<h2 id="调试">调试</h2>
<p>外部项目引入 web-highlighter 后，由于都是压缩后的代码，出错时可能不便与调试。因此，build时除了产出最终代码产物，同时会在 <code>dist</code> 下产出 SourceMap ——  <code>web-highlighter.min.js.map</code>，外部程序使用 web-highlighter 时，可以载入该 SourceMap 用以进行源码调试。</p>
<p>SourceMap 与一些工具的集成方式：</p>
<ul>
<li>浏览器中可以直接放在对应服务器目录，直接载入；</li>
<li>webpack可以使用 <a href="https://webpack.js.org/loaders/source-map-loader/"><code>source-map-loader</code></a></li>
<li>gulp可以结合使用 <a href="https://github.com/gulp-sourcemaps/vinyl-sourcemaps-apply"><code>vinyl-sourcemaps-apply</code></a></li>
<li>rollup可以考虑使用 <a href="https://github.com/maxdavidson/rollup-plugin-sourcemaps"><code>rollup-plugin-sourcemaps</code></a></li>
</ul>
<h2 id="开发">开发</h2>
<h3 id="启动本地-demo-进行开发">启动本地 DEMO 进行开发</h3>
<pre><code class="bash language-bash">npm run dev</code></pre>
<h3 id="外部系统调用调试（构建产出包并提供-http-访问）">外部系统调用调试（构建产出包并提供 HTTP 访问）</h3>
<pre><code class="bash language-bash">npm run start</code></pre>
<h2 id="使用">使用</h2>
<p>引入方式：</p>
<pre><code class="JavaScript language-JavaScript">// 全局
var Highlighter = window.Highlighter;

// CommonJS
var Highlighter = require('highlighter');

// ES Module
import Highlighter from 'highlighter';</code></pre>
<pre><code class="JavaScript language-JavaScript">var highlighter = new Highlighter();

// 开启 划词自动高亮
highlighter.run();</code></pre>
<h2 id="功能">功能</h2>
<h3 id="api-功能列表">API 功能列表</h3>
<p><a href="./docs/API.md">相关文档</a></p>
<h3 id="暴露的钩子函数">暴露的钩子函数</h3>
<p><a href="./docs/ADVANCE.md">相关文档</a></p>
        </main>
        <section class="op-panel">
            <div>
                <label class="op-name">自动高亮：</label>
                <label><input name="auto" type="radio" value="on" checked />开启</label>
                <label><input name="auto" type="radio" value="off" />关闭</label>
            </div>
            <button class="op-btn disabled" id="js-highlight" disabled >手动高亮选区</button>
            <a href="https://github.com/alienzhou/web-highlighter" target="_blank">
                <?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1555513182711" class="icon" style="" viewBox="0 0 1049 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1456" xmlns:xlink="http://www.w3.org/1999/xlink" width="131.125" height="128"><defs><style type="text/css"></style></defs><path d="M524.979332 0C234.676191 0 0 234.676191 0 524.979332c0 232.068678 150.366597 428.501342 358.967656 498.035028 26.075132 5.215026 35.636014-11.299224 35.636014-25.205961 0-12.168395-0.869171-53.888607-0.869171-97.347161-146.020741 31.290159-176.441729-62.580318-176.441729-62.580318-23.467619-60.841976-58.234462-76.487055-58.234463-76.487055-47.804409-32.15933 3.476684-32.15933 3.476685-32.15933 53.019436 3.476684 80.83291 53.888607 80.83291 53.888607 46.935238 79.963739 122.553122 57.365291 152.97411 43.458554 4.345855-33.897672 18.252593-57.365291 33.028501-70.402857-116.468925-12.168395-239.022047-57.365291-239.022047-259.012982 0-57.365291 20.860106-104.300529 53.888607-140.805715-5.215026-13.037566-23.467619-66.926173 5.215027-139.067372 0 0 44.327725-13.906737 144.282399 53.888607 41.720212-11.299224 86.917108-17.383422 131.244833-17.383422s89.524621 6.084198 131.244833 17.383422C756.178839 203.386032 800.506564 217.29277 800.506564 217.29277c28.682646 72.1412 10.430053 126.029806 5.215026 139.067372 33.897672 36.505185 53.888607 83.440424 53.888607 140.805715 0 201.64769-122.553122 245.975415-239.891218 259.012982 19.121764 16.514251 35.636014 47.804409 35.636015 97.347161 0 70.402857-0.869171 126.898978-0.869172 144.282399 0 13.906737 9.560882 30.420988 35.636015 25.205961 208.601059-69.533686 358.967656-265.96635 358.967655-498.035028C1049.958663 234.676191 814.413301 0 524.979332 0z" fill="#191717" p-id="1457"></path><path d="M199.040177 753.571326c-0.869171 2.607513-5.215026 3.476684-8.691711 1.738342s-6.084198-5.215026-4.345855-7.82254c0.869171-2.607513 5.215026-3.476684 8.691711-1.738342s5.215026 5.215026 4.345855 7.82254z m-6.953369-4.345856M219.900283 777.038945c-2.607513 2.607513-7.82254 0.869171-10.430053-2.607514-3.476684-3.476684-4.345855-8.691711-1.738342-11.299224 2.607513-2.607513 6.953369-0.869171 10.430053 2.607514 3.476684 4.345855 4.345855 9.560882 1.738342 11.299224z m-5.215026-5.215027M240.760389 807.459932c-3.476684 2.607513-8.691711 0-11.299224-4.345855-3.476684-4.345855-3.476684-10.430053 0-12.168395 3.476684-2.607513 8.691711 0 11.299224 4.345855 3.476684 4.345855 3.476684 9.560882 0 12.168395z m0 0M269.443034 837.011749c-2.607513 3.476684-8.691711 2.607513-13.906737-1.738342-4.345855-4.345855-6.084198-10.430053-2.607513-13.037566 2.607513-3.476684 8.691711-2.607513 13.906737 1.738342 4.345855 3.476684 5.215026 9.560882 2.607513 13.037566z m0 0M308.555733 853.526c-0.869171 4.345855-6.953369 6.084198-13.037566 4.345855-6.084198-1.738342-9.560882-6.953369-8.691711-10.430053 0.869171-4.345855 6.953369-6.084198 13.037566-4.345855 6.084198 1.738342 9.560882 6.084198 8.691711 10.430053z m0 0M351.145116 857.002684c0 4.345855-5.215026 7.82254-11.299224 7.82254-6.084198 0-11.299224-3.476684-11.299224-7.82254s5.215026-7.82254 11.299224-7.82254c6.084198 0 11.299224 3.476684 11.299224 7.82254z m0 0M391.126986 850.049315c0.869171 4.345855-3.476684 8.691711-9.560882 9.560882-6.084198 0.869171-11.299224-1.738342-12.168395-6.084197-0.869171-4.345855 3.476684-8.691711 9.560881-9.560882 6.084198-0.869171 11.299224 1.738342 12.168396 6.084197z m0 0" fill="#191717" p-id="1458"></path></svg>
            </a>
        </section>
    </body>
</html>